<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="theme-color" content="#141414">
    <title>SpotiBlind</title>
    <link href="../dist/output.css" rel="stylesheet">
    <link rel="shortcut icon" href="../src/favicon.svg" type="image/x-icon">
    <link rel="manifest" href="manifest.json">
</head>
<body class="min-h-screen grid place-content-center bg-[#141414]">
    <div class="text-center">
        <img src="../src/LOGO.svg" alt="SpotiBlind">
        <div class="flex place-content-center place-items-center mt-1 gap-4">
            <div class="w-[55px] h-[7px] bg-white rounded-[7px]"></div>
            <button class="text-white font-spotify bg-[#568A6B] w-[120px] h-[50px] rounded-[20px] text-xl font-medium " id="mainBtn">Jouer</button>
            <div class="w-[55px] h-[7px] bg-white rounded-[7px]"></div>
        </div>
    </div>
    <div class="fixed bottom-4 text-center min-w-full">
        <span class="text-white font-spotify text-[14px]">Besoin d'aide?</span>
    </div>
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register('sw.js');
        }

        const mainBtn = document.querySelector('#mainBtn');
        mainBtn.addEventListener('click', async () => {
            const result = await window.Notification.requestPermission();
            
            if (result === "granted") {
                navigator.serviceWorker.ready.then((registration) => {
                    setTimeout(() => {
                        registration.showNotification("Spotify est prÃªt!", {
                            body: 'Revient sur le jeu!'
                        });
                    }, 1000)
                });
            }

            setTimeout(() => {
                window.location.href = '/login';
            }, 500)

            location.assign("spotify:track:7wZnwgGkwpJ8EYJ6VEJD2A")
        })
    </script>
</body>
</html>